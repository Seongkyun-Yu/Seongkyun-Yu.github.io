<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-xxxxxx-xx"></script>
  <script type="text/javascript">
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-xxxxxx-xx');
  </script>
  

  <!-- Baidu Tongji -->
  
  <script type="text/javascript">
    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  

  <!-- Baidu Push -->
  
  <script>
    (function() {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>
  

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc" />
  <meta name="baidu-site-verification" content="PpzM9WxOJU" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="It&#39;s an IT blog..." />
  <meta name="keyword" content="seongkyun, IT blog,Blog" />
  <link rel="shortcut icon" href="/img/avatar/roguerabbit.jpg" />

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>
  <!-- Bootstrap Core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/beantech.min.css" />

  <!-- Pygments Highlight CSS -->
  
<link rel="stylesheet" href="../../../../css/highlight.css">
<link rel="stylesheet" href="../../../../css/widget.css">
<link rel="stylesheet" href="../../../../css/rocket.css">
<link rel="stylesheet" href="../../../../css/signature.css">
<link rel="stylesheet" href="../../../../css/catalog.css">
<link rel="stylesheet" href="../../../../css/livemylife.css">


  

  
  <!-- top start (article top hot config) -->
  <link rel="stylesheet" href="/css/top.css" />
  <!-- top end -->
  

  

  
  <!-- viewer start (Picture preview) -->
  <link rel="stylesheet" href="/css/viewer.min.css" />
  <!-- viewer end -->
  

  
  <!-- Search start -->
  <link rel="stylesheet" href="/css/search.css" />
  <!-- Search end -->
  

  
  <!-- ThemeColor start -->
  <link rel="stylesheet" href="/css/themecolor.css" />
  <!-- ThemeColor end -->
  

  

  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
    href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="http://yoursite.com/2020/08/07/0049-AWS/">
  <title>
    
    AWS - S3, CloudFront, Route53을 이용한 정적 호스팅 - 개발개발 블로그
    
  </title>
<meta name="generator" content="Hexo 4.2.1"></head>


<!-- hack iOS CSS :active style -->

<body ontouchstart="" class="body--home">
	<!-- ThemeColor -->
	
	<!-- ThemeColor -->
<!-- <div class="toggle" onclick="document.body.classList.toggle('body--dark')">Switch Color</div> -->

<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons bright-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>

	

	<!-- Gitter -->
	

	<!-- Navigation (contains search)-->
	<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">개발개발 블로그</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">Home</a>
          </li>

          

          
          

          
          <li>
            <a href="/about/">About</a>
          </li>
          
          

          
          

          
          <li>
            <a href="/categories/">Categories</a>
          </li>
          
          

          
          <li>
            <a href="/tags/">Tags</a>
          </li>
          
          

          
          <li><a class="popup-trigger" title="Search"><span class="search-icon"></span>Search</a></li>
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>


<script>
  // Drop Bootstarp low-performance Navbar
  // Use customize navbar with high-quality material design animation
  // in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


	<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    header.intro-header {
       /*post*/
        background-image: url('/img/header_img/lml_bg.jpg');
      
    }

    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#AWS" title="AWS">AWS</a>
              
              <a class="tag" href="/tags/#S3" title="S3">S3</a>
              
              <a class="tag" href="/tags/#CloudFront" title="CloudFront">CloudFront</a>
              
              <a class="tag" href="/tags/#Route53" title="Route53">Route53</a>
              
            </div>
            <h1>AWS - S3, CloudFront, Route53을 이용한 정적 호스팅</h1>
            <h2 class="subheading">S3, CloudFront, Route53</h2>
            <span class="meta">
              Posted by Seongkyun Yu on
              2020-08-07
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">5</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">869</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- 不蒜子统计 start -->
            <span class="meta">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            <!-- WordCount end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  

</header>



	<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
	
<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div
        class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container"
      >
        <p><img src="https://images.velog.io/images/seongkyun/post/4cee7b98-2c8d-4454-8999-4932075566f9/Lf6iXvNq4dLRhNj7oVixnS.png" alt=""></p>
<p>내가 만든 웹을 다른 사람들이 볼 수 있도록 하려면 배포과정이 필요하다.<br></p>
<p>AWS는 S3라는 저장소를 제공하는데 저렴한 비용으로 정적 호스팅을 할 수 있다는 장점이 있다.<br></p>
<p>하지만 S3에서 기본적으로 제공하는 URL은 HTTPS와 도메인 설정이 불가능하다.<br></p>
<p>따라서 CloudeFront와 Route53을 이용해 해당 문제를 해결해야 한다.<br><br></p>
<p>CloudFront는 S3에서 제공하지 않는 HTTPS 배포를 가능하게 만들어 준다.<br></p>
<p>뿐만 아니라 전 세계에 있는 엣지 포인트를 이용해 캐싱처리를 하여 사용자가 가장 가까운 지역의 엣지 포인트로 접속하게 하여 <br></p>
<p>더 빠른 속도를 제공하고 S3보다 저렴한 비용을 지불하도록 도와준다.<br><br></p>
<p>Route53은 사용자가 소유한 도메인을 연결해주는 DNS서비스 역할을 한다.<br><br></p>
<h2 id="도메인-만들기"><a href="#도메인-만들기" class="headerlink" title="도메인 만들기"></a>도메인 만들기</h2><p>우선 무료로 도메인을 만들어 보자.<br><br></p>
<p><img src="https://user-images.githubusercontent.com/15887982/89670695-90ceb900-d91c-11ea-9703-4e7cb29de015.png" alt=""></p>
<p><a href="https://www.freenom.com/" target="_blank" rel="noopener">https://www.freenom.com/</a> 에 접속한다.<br></p>
<p>회원가입 후 로그인을 한 후 Servieces 탭의 Register a New Domain을 선택한다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89671092-57e31400-d91d-11ea-903c-4535f7cc17dd.png" alt=""></p>
<p>원하는 도메인을 선택 후 checkout을 눌러 구매 후</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89747550-3428f500-dafa-11ea-9537-5cfdd6705a93.png" alt=""></p>
<p>active 상태가되면 사용이 가능해진다.</p>
<br>

<h2 id="S3에-프로젝트-업로드-하기"><a href="#S3에-프로젝트-업로드-하기" class="headerlink" title="S3에 프로젝트 업로드 하기"></a>S3에 프로젝트 업로드 하기</h2><p><img src="https://user-images.githubusercontent.com/15887982/89671513-16069d80-d91e-11ea-834d-09443e1fcf6a.png" alt=""></p>
<p><a href="https://s3.console.aws.amazon.com/" target="_blank" rel="noopener">AWS S3 서비스</a>에 접속해서 버킷 만들기 선택</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89672686-0f792580-d920-11ea-9ac8-a702cb181ae1.png" alt=""></p>
<p>버킷 이름을 작성하고 다음</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89673072-b65dc180-d920-11ea-9d7a-4063f1d7192e.png" alt=""></p>
<p>기본 암호화에 체크한 후 다음</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89673250-fd4bb700-d920-11ea-876b-95d7a1a62427.png" alt=""></p>
<p>모든 퍼블릭 액세스 차단의 체크를 풀고 다음으로 넘어가서 버킷 만들기를 마무리한다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89673706-c9bd5c80-d921-11ea-8f2a-60cdff36103b.png" alt=""></p>
<p><img src="https://user-images.githubusercontent.com/15887982/89677242-0c823300-d928-11ea-9309-cb0eb4439a44.png" alt=""></p>
<p>버킷 속성에서 정적 웹사이트 호스팅을 누르고 인덱스 문서와 오류 문서에 index.html을 작성 후 저장한다.</p>
<p>여기서 생성된 엔드포인트 주소로도 업로드할 프로젝트에 접근할 수 있게 된다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89674768-a7c4d980-d923-11ea-9569-cd0ac3207406.png" alt=""></p>
<p>앞서 버킷을 퍼블릭으로 설정은 했지만 아직 어떠한 기능을 공개할지 정하지 않았기 때문에 그에 필요한 정책을 만들어야 한다.</p>
<p>권한 탭을 누르고 버킷 정책에서 정책 생성기를 클릭</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89675753-6fbe9600-d925-11ea-9c39-eb6b00eea995.png" alt=""></p>
<p>Select Type of Policy에서 S3 Bucket Policy를 선택</p>
<p>Principal에는 적당히 규칙명을 적어주고 Actions에서 Get Object를 선택</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89675755-70efc300-d925-11ea-8410-390ccb01e36c.png" alt=""></p>
<p>Amazon Resource Name (ARN)에는 <code>arn:aws:s3:::&lt;bucket_name&gt;/&lt;key_name&gt;</code> 형식의 문자열을 만든다.<br>이 글에선 <code>arn:aws:s3:::studyfe.ml/*</code>으로 작성 했다.<br>그 후 Add Statement와 Generate Policy를 눌러 정책을 만든다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89676039-e52a6680-d925-11ea-9b32-00def120e9d5.png" alt=""></p>
<p><img src="https://user-images.githubusercontent.com/15887982/89676167-26227b00-d926-11ea-929d-4ce348b767bb.png" alt=""></p>
<p>생성된 정책을 버킷에 붙여넣고 저장</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89676516-c082be80-d926-11ea-83c0-2499dcee4277.png" alt=""></p>
<p>개요 탭을 누르고 업로드를 클릭하여 프로젝트를 업로드 한다.</p>
<br>

<h2 id="CloudFront-설정"><a href="#CloudFront-설정" class="headerlink" title="CloudFront 설정"></a>CloudFront 설정</h2><p>S3에서 제공해주는 엔드포인트로도 앱을 배포할 수 있지만 CloudFront를 사용하는 이유는 다음과 같다.</p>
<ul>
<li>HTTPS 배포</li>
<li>전세계 엣지 로케이션을 이용한 더 빠른 속도</li>
<li>S3 직접 공유보다 저렴한 비용</li>
</ul>
<p>S3에서 제공하는 주소는 HTTP로 보안에 취약하다. CloudFront는 이를 쉽게 HTTPS로 배포할 수 있게 도와준다.</p>
<p>S3를 이용해 직접 배포할 경우 S3 버킷을 설정한 지역의 저장소로 전세계 사용자가 요청을 보낸다. 따라서 먼 지역의 유저일 수록 속도가 느려질 것이다. 하지만 CloudFront를 사용한다면 전세계 엣지 로케이션에서 캐싱을 해두고 유저가 가까운 엣지에 요청을 보내도록 한다. 따라서 S3보다 속도가 더 빠르다.</p>
<p>또한 CloudFront의 요금이 S3 요금보다 저렴하기 때문에 비용절감 효과가 있다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89678839-db573200-d92a-11ea-9ed1-f5f289d71713.png" alt=""><br><img src="https://user-images.githubusercontent.com/15887982/89678844-dbefc880-d92a-11ea-837b-efaf9ba61e73.png" alt=""></p>
<p><a href="https://console.aws.amazon.com/cloudfront" target="_blank" rel="noopener">CloudFront</a> 서비스로 들어가 Create Distribution을 선택한 후 Get Started를 누른다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89679777-bd8acc80-d92c-11ea-9e67-96a8be566c72.png" alt=""><br><img src="https://user-images.githubusercontent.com/15887982/89679779-be236300-d92c-11ea-9a05-4b3dc588fa1b.png" alt=""></p>
<p>Origin Domain Name에 방금 만든 버킷의 정적 웹사이트 호스팅 주소를 적는다.</p>
<p>Viewer Protocol Policy은 <code>Redirect HTTP to HTTPS</code>로 설정하고</p>
<p>Default Root Object에는 index.html을 작성한 후 Create Distribution을 누른다.</p>
<br>

<p><strong>—-REACT 프로젝트일 경우 react-router-dom을 사용한다면 다음과 같은 설정이 필요하다—-</strong></p>
<p><img src="https://user-images.githubusercontent.com/15887982/89732132-bcba7d80-da87-11ea-9a0b-1ccb050dca90.png" alt=""></p>
<p>방금 생성한 Distribution을 선택 후 <code>Distribution Settings</code>를 누른다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89732135-bdebaa80-da87-11ea-9128-005d05b61fd2.png" alt=""></p>
<p><code>Error Pages</code>에서 <code>Create Custom Response</code>를 선택</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89732228-53873a00-da88-11ea-9c27-00e0ee77cd85.png" alt=""></p>
<p>HTTP Error Code를 <code>404: Not Found</code>로</p>
<p>Error Caching Minimum TTL을 <code>5</code>로</p>
<p>Customize Error Response를 <code>Yes</code>로</p>
<p>Response Page Path를 <code>/index.html</code>으로</p>
<p>HTTP Response Code를 <code>200 OK</code>로 설정하고 Create를 누른다.</p>
<p>같은 일을 <strong>403 Error Code로도 반복</strong>한다.</p>
<br>

<h2 id="Route53-설정"><a href="#Route53-설정" class="headerlink" title="Route53 설정"></a>Route53 설정</h2><p>Route53은 AWS에서 제공하는 DNS 서비스다.</p>
<p><img src="https://user-images.githubusercontent.com/15887982/89732423-e7a5d100-da89-11ea-9839-886d2d539bdb.png" alt=""></p>
<p><a href="https://console.aws.amazon.com/route53" target="_blank" rel="noopener">Route53</a>에 접속 후 호스팅 영역 생성을 눌러준다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89732526-71559e80-da8a-11ea-937b-9fd60b7c8f5d.png" alt=""></p>
<p>설정한 도메인 주소를 입력 후 퍼블릭 호스팅을 선택하고 생성한다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89732846-68fe6300-da8c-11ea-9d7c-15457a3cb18f.png" alt=""></p>
<p>이제 여기서 생성된 네임 서버 리스트를 도메인에 등록하자.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89732614-e1fcbb00-da8a-11ea-95cd-f75d5ffa7560.png" alt=""></p>
<p>도메인을 발급한 <a href="https://freenom.com/" target="_blank" rel="noopener">freenom</a>에 접속하여</p>
<p>Services -&gt; My Domains를 선택 후 Manage Domain을 눌러준다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89732860-803d5080-da8c-11ea-93fd-516c1c315a1a.png" alt=""></p>
<p>Management Tools -&gt; Nameservers를 선택</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89732939-02c61000-da8d-11ea-8090-673ec007bd9c.png" alt=""></p>
<p>Use custom nameservers를 누르고 위에서 발급받은 Nameserver를 적은 후 Change Nameservers를 선택</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89733007-8849c000-da8d-11ea-9fb2-e4a936775a43.png" alt=""></p>
<p>다시 Route53으로 돌아와서 레코드 생성을 누른다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89733042-bc24e580-da8d-11ea-9f27-0de78aa741ad.png" alt=""></p>
<p><img src="https://user-images.githubusercontent.com/15887982/89733160-816f7d00-da8e-11ea-92f3-81b022e89f47.png" alt=""></p>
<p>단순 라우팅을 선택 후 단순 레코드 정의를 누른다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89734363-a4059400-da96-11ea-869c-3348925b11a8.png" alt=""></p>
<p>레코드 정의를 작성한다.</p>
<p>.studyfe.ml로 돼있는 앞 부분에 작성하면 해당 주소로 접속할 수 있다.</p>
<p>예를들어 www를 작성한다면 <a href="http://www.studyfe.ml로" target="_blank" rel="noopener">www.studyfe.ml로</a> 접속할 수 있다.</p>
<p>후에 밑에 설정은</p>
<p><code>CloudFront 배포에 대한 별칭</code></p>
<p><code>버킷을 설정한 리즌</code></p>
<p><code>CloudFront의 해당 주소</code>로 설정 후 단순 레코드 정의를 눌러 생성한다.</p>
<p>(CloudFront의 도메인 주소는 CloudFront 서비스로 접속해서 확인할 수 있다)</p>
<p>여기서는 www가 붙은 주소와 그렇지 않은 주소 모두 사용할 수 있도록 레코드 정의를 두 번 해보겠다.</p>
<p><strong>CloudFront의 해당 주소를 선택할 수 있을 때까지 시간이 걸릴 수 있다.</strong></p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89733357-f099a100-da8f-11ea-9914-c197523f9dc2.png" alt=""></p>
<p>작업이 완료되면 다음과 같은 상태가 된다.</p>
<p>레코드 생성을 누른다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89734147-3d33ab00-da95-11ea-9d7a-1631b535dcc8.png" alt=""></p>
<p>여기까지 완료했다면 해당 도메인으로 접속이 가능하다.</p>
<p>다만 SSL인증서 발급이 끝나지 않았기 때문에 HTTPS로 정상 작동하지는 않는다.</p>
<br>

<h2 id="AWS-Certification"><a href="#AWS-Certification" class="headerlink" title="AWS Certification"></a>AWS Certification</h2><p>HTTPS에는 SSL이라는 인증서가 필요하다. 이는 AWS에서 무료로 제공하고 있다.</p>
<p><a href="https://console.aws.amazon.com/acm" target="_blank" rel="noopener">AWS Certification</a>에 접속 후</p>
<p><img src="https://user-images.githubusercontent.com/15887982/89733474-b7156580-da90-11ea-9cfe-40fbdec50e66.png" alt=""></p>
<p><strong>(인증서 발급은 반드시 미국 동부지역을 선택해야 한다!)</strong></p>
<p>리즌 선택을 완료한 후 인증서 요청을 누른다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89733558-2c813600-da91-11ea-95bc-49a237d4427d.png" alt=""><br><img src="https://user-images.githubusercontent.com/15887982/89733555-27bc8200-da91-11ea-98ef-3406a3ccfff3.png" alt=""></p>
<p>공인 인증서 요청을 선택 후 인증서 요청을 누르고 도메인 이름을 적어준다.</p>
<p>도메인 이름이 여러개인 경우 <code>이 인증서에 다른 이름 추가</code>를 눌러 추가할 수 있다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89733609-8aae1900-da91-11ea-8b86-e4822bfdf9b8.png" alt=""><br><img src="https://user-images.githubusercontent.com/15887982/89733617-9b5e8f00-da91-11ea-8b51-2d7e6cf163d1.png" alt=""><br><img src="https://user-images.githubusercontent.com/15887982/89733643-c6e17980-da91-11ea-89fc-3352b4e3b8b4.png" alt=""></p>
<p>DNS 검증을 선택후 계속 다음으로 진행</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89733674-11fb8c80-da92-11ea-8b09-ed8f4b186796.png" alt=""></p>
<p>요청을 한 후 도메인 주소를 눌러 <code>Route 53에서 레코드 생성</code>을 누른다.</p>
<p>이 작업은 신청한 도메인마다 진행해줘야 한다.</p>
<p>계속 버튼을 눌러 심사가 완료될 때까지 기다려야 한다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89733723-7a4a6e00-da92-11ea-83b6-8cab626e9e04.png" alt=""></p>
<p>검증시간은 주소마다 다를 수 있다.</p>
<p>발급이 완료되면 다음 단계를 진행해보자.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89732132-bcba7d80-da87-11ea-9a0b-1ccb050dca90.png" alt=""></p>
<p><a href="https://console.aws.amazon.com/cloudfront/" target="_blank" rel="noopener">CloudFront</a>로 돌아가</p>
<p>Distribution Settings를 선택</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89733793-ea58f400-da92-11ea-9da3-75dbd0f9d4f7.png" alt=""></p>
<p>Edit 버튼을 선택</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89733863-60f5f180-da93-11ea-84ac-103821c08d16.png" alt=""></p>
<p>Alternate Domain Names에 인증서 발급시 등록한 도메인 주소들을 써준다.</p>
<p>그 후 Custom SSl Certificate를 선택한다.<br>(인증서 발급이 끝난 후 여기서 선택할 수 있게 되는데 시간이 걸릴 수 있다)</p>
<p>제일 아래로 내려가 <code>Yes Edit</code>을 누르고 기다리면 홈페이지에 정상적으로 인증서가 적용된 모습을 볼 수 있다.</p>
<br>

<p><img src="https://user-images.githubusercontent.com/15887982/89734470-373ec980-da97-11ea-9b97-b66833b2658c.png" alt=""></p>


        <hr />
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a
              href="/2020/08/30/0050-SEO/"
              data-toggle="tooltip"
              data-placement="bottom"
              title="Google 크롤링 요청하기"
              >&larr; Previous Post</a
            >
          </li>
           
          <li class="next">
            <a
              href="/2020/06/22/0048-product/"
              data-toggle="tooltip"
              data-placement="bottom"
              title="기획"
              >Next Post &rarr;</a
            >
          </li>
          
        </ul>

        
        <!-- tip start -->
        <div class="tip">
          <p>
            If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
          </p>
        </div>
        <!-- tip end -->
         
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=AWS - S3, CloudFront, Route53을 이용한 정적 호스팅&body=Hi,I found this website and thought you might like it http://yoursite.com/2020/08/07/0049-AWS/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr />

        <!-- comments start -->
        <!-- 1. gitalk comment -->



<!-- 2. gitment comment -->



<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr />
      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#도메인-만들기"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">도메인 만들기</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#S3에-프로젝트-업로드-하기"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">S3에 프로젝트 업로드 하기</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#CloudFront-설정"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">CloudFront 설정</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Route53-설정"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">Route53 설정</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#AWS-Certification"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">AWS Certification</span></a></li></ol>
        
        </div>
      </aside>
    


      <!-- Sidebar Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"
      >
        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a
              class="tag"
              href="/tags/#AWS"
              title="AWS"
              >AWS</a
            >
            
            <a
              class="tag"
              href="/tags/#S3"
              title="S3"
              >S3</a
            >
            
            <a
              class="tag"
              href="/tags/#CloudFront"
              title="CloudFront"
              >CloudFront</a
            >
            
            <a
              class="tag"
              href="/tags/#Route53"
              title="Route53"
              >Route53</a
            >
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr />
        <h5>FRIENDS</h5>
        <ul class="list-inline">
          
        </ul>
        
      </div>
    </div>
  </div>
</article>


<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



	<!-- Footer (contains ThemeColor、viewer) -->
	<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          
            <li>
              <a target="_blank" href="https://github.com/Seongkyun-Yu">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          
            <li>
              <a target="_blank" href="https://twitter.com/Seongkyun-Yu">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          
            <li>
              <a target="_blank" href="https://www.instagram.com/Seongkyun-Yu">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          

          

          

          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          Seongkyun Yu
          2022
          <br>
          Theme by
          <a href="http://beantech.org" target="_blank" rel="noopener">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a href="https://v-vincen.life/" target="_blank" rel="noopener">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>

<!-- jQuery -->
<script type="text/javascript" src="/js/jquery.min.js"></script>
<!-- <script type="text/javascript" src="/js/jquery.js"></script> -->
<!-- <script type="text/javascript" src="//cdnjs.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->

<!-- Bootstrap Core JavaScript -->
<script type="text/javascript" src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script type="text/javascript" src="/js/hux-blog.min.js"></script>

<!-- catalog -->
<script type="text/javascript" async="true" src="/js/catalog.js?v=1.0.0"></script>

<!-- totop(rocket) -->
<script type="text/javascript" async="true" src="/js/totop.js?v=1.0.0"></script>

<!-- Busuanzi JavaScript -->
<script type="text/javascript" async="true" src="/js/busuanzi.pure.mini.js"></script>




  <!-- ThemeColor start -->
  <script type="text/javascript" src="/js/themecolor.js"></script>
  <!-- ThemeColor end -->





  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  <script type="text/javascript" src="/js/viewer/viewer.min.js"></script>
  <script type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){ hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if($('#tag_cloud').length !== 0){ async("http://yoursite.com/js/jquery.tagcloud.js",function(){ $.fn.tagcloud.defaults = { //size: {start: 1, end: 1, unit: 'em'}, color: {start:
'#bbbbee', end: '#0085a1'}, }; $('#tag_cloud a').tagcloud(); }) } </script> -->


	<!-- Search -->
	
	<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="Search..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  <script src="/js/ziploader.js"></script>
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;

            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


	

	<!-- Image to hack wechat -->
	<!-- <img src="http://yoursite.com/img/icon_wechat.png" width="0" height="0" /> -->
	<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
